
sr_moveit_hand_config
------------

## Overview

  The package contains MoveIt! configuration files and generators of MoveIt! configurations for the Shadow hands.

## Modification from generated configs

The MoveIt! assistant was used with the shadowhand_motor.urdf and generated the standard files. 
 
### Modified config files
Some of the config files were renamed to serve as templates for the config generators :

  1. kinematics.yaml : renamed kinematics_template.yaml
  2. ompl_planning.yaml : renamed ompl_planning_template.yaml
  3. joint_limits.yaml : renamed joint_limits_template.yaml


### Modified SRDF

The srdf file was completely hand crafted as xacros, to cope with different urdf derived from shadowhand_motor.urdf
Starting from shadowhand_motor.srdf, new files were created :

  1. shadowhand.srdf.xacro contains all the necessary macros to generate a SRDF for different types of hands
  2. shadowhands.srdf.xacro uses substitution args to generate a srdf from command line
  3. shadowhands_prefix.srdf.xacro is the same as shadowhands.srdf.xacro except it handles non-null prefixes (arg cannot be an empty string, hence the two files)
  
### Generators

#### SRDF generator

The SRDF generator *generate_srdf.py* depends on the existence of a URDF on the parameter server, as it generates a compatible SRDF according to the current URDF.
It waits to ensure the robot_description is available and uses the URDF to call the SRDF macros with coherent arguments.
The generator directly uploads the data on parameter server due to thread issues in launch files (see lower) or stores it in the provided output filename
  
#### Config generator
  
The 4 config files MoveIt! requires are generated by *generate_moveit_config.py*. It reads 3 templates, and uses the SRDF to create coherent config files. 
The command line call of the generator requires a SRDF file and creates the standard config files in the current directory. 
However, this generator is usually called as a library in the loader.
 
The loader uses the SRDF on the parameter server and has to wait for robot_description_semantic to appear there. 
It then calls the generator for the config files and directly uploads them on the parameter server (due to thread issues in launch files, see lower).
  
### Modified launch files

Launch files use on-the-fly generation of parameters, but due to non-threaded parameter load, there is no mean to simultaneously load the required URDF
and ensure the SRDF generator will get the URDF from the parameter server in time. The same is true for the config files that require the SRDF.

Instead of param tags, node tags must be used as they are all started in parallel. 
  
The MoveIt! generated launch files were adapted to use the generators.

## Usage

By default the demo.launch loads a shadowhand_motor urdf on the parameter server and starts the demo.
However, the planning_context or move_group do not load the robot_description by default and expect robot_description to be on the param server,
but _load_robot_description_ arg can enforce the urdf loading. This loaded robot_description should contain one of the possible hand.


